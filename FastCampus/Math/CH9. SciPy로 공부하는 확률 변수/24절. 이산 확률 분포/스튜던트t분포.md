# 스튜던트 t 분포

### Fat tail 현상

데이터 분석 실무에서는 자연에서 발생하는 현상 중 많은 것들을 정규 분포를 따르는 확률 변수로 모형화하여 사용하고 있다. 그러나 이러한 데이터들을 자세히 살펴보면 실제로는 정규분포보다 양 끝단의 비중이 더 큰 것을 알 수 있다.
이를 Fat tail 현상이라고 한다.



### 스튜던트 t 분포

가우시안 정규 분포를 따르는 확률 변수 $X$의 $n$개의 샘플 $x_1,\cdots,x_n$의 합(또는 평균)은 샘플 분산으로 정규화하면 
스튜던트-t 분포를 따른다. 스튜던트 t 분포의 확률 밀도 함수는 다음 수식에 의해 정의된다. 가우시안 정규 분포와 달리 정수 값을 가지는 자유도(degree of freedom)라는 모수(parameter) $\nu$ 를 추가적으로 가진다.

$t(x;\mu, \sigma^2, \nu) = \frac{\Gamma\left(\frac{\nu+1}{2}\right)} {\sqrt{\nu\pi}\Gamma\left(\frac{\nu}{2}\right)} \left(1+\frac{(x-\mu)^2}{\nu\sigma^2} \right)^{-\frac{\nu+1}{2}}$

이 식에서 $\Gamma$ 는 감마(Gamma) 함수라는 특수 함수이다.

$\Gamma(x) = \int_0^\infty  u^{x-1} e^{-u} du$



- 자유도 $\nu$ 가 작으면 가우시안 정규 분포보다 분산이 크고 fat tail을 보이지만,
- 자유도 $\nu$ 가 증가할수록 가우시안 정규 분포로 수렴한다.



### 모멘트

스튜던트 t 분포의 기댓값과 분산은 다음과 같다.

- 기댓값:

$\text{E[X]}=\mu$

- 분산($\nu$ > 2 인 경우만 적용됨. $\nu$ = 1,2 일 때는 분산이 무한대)

$\text{Var}[X] = \dfrac{\nu \sigma^2}{\nu-2}$



### 정규 분포의 샘플 평균이 이루는 분포

중심 극한 정리(Central Limit Theorem)에 따르면 모든 확률 변수의 합(또는 평균)은 샘플의 갯수가 증가할 수록 가우시안 정규 분포에 가까워진다. 그러면 샘플의 수가 무한대가 아닌 유한한 경우는 어떨까?

가우시안 정규 분포로부터 얻은 $n$ 개의 샘플 $x_1,\cdots,x_n$ 로부터 얻은 **샘플 평균을 샘플 표준편차로 정규화한 값**은 자유도가 $n-1$인 스튜던트 $t$분포를 이룬다.

여기에서 중요한 포인트는 샘플 표준편차로 정규화하였다는 점이다. 정규 분포로 부터 얻은 샘플 데이터의 샘플 평균은 그 자체로는 항상 정규 분포를 따르지만 샘플 표준편차라고 하는 다른 확률 변수로 나누는 과정에서 정규 분포가 아닌 스튜던트 t분포를 따르게 된다.

이론적 표준 편차라는 상수로 정규화한 샘플 평균은 정규 분포를 따른다.

$z = \frac{\bar{x} - \mu}{\dfrac{\sigma}{\sqrt{n}}} \sim \mathcal{N}(x; 0, 1)$

하지만 샘플 평균을 샘플 분산으로 정규화한 값은 스튜던트 t분포를 따른다.

$t = \frac{\bar{x} - \mu}{\dfrac{s}{\sqrt{n}}} \sim t(x; 0, 1, n - 1)$

이 식에서 $\bar x, s$ 은 각각 샘플 평균, 샘플 표준편차다.

$\bar{x} = \frac{x_1+\cdots+x_n}{n}$

$s^2 = \frac{1}{n-1}\sum_{i=1}^n (x_i - \bar{x})^2$

위 정리는 추후 정규 분포의 기댓값에 관한 각종 검정(testing)에서 사용된다.



### 통계량

복수의 샘플 데이터 집합을 수치적으로 연산하여 구한 숫자를 **통계량(statistic)**라고 한다. 위에서 구한 "정규화된 샘플 평균"이라는 값도 통계량의 일종이다. **스튜던트-t 분포는 "정규화된 샘플 평균" 이라는 통계량이 따르는 분포**이다. 이렇게 통계량을 구하는 수식에 따라 통계량이 어떤 분포를 이루는가를 알 수 있으면 추후 검정(test)이라고 하는 확률 분포에 대한 판단을 내리는 데 도움이 된다.